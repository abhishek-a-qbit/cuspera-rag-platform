<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cusp Strategic Consultant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { --slate-950: #020617; --slate-900: #0f172a; --indigo-500: #6366f1; }
        body { background-color: var(--slate-950); color: #f8fafc; font-family: 'Inter', sans-serif; overflow: hidden; }
        .glass-panel { background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(12px); border: 1px solid rgba(51, 65, 85, 0.5); }
        .roadmap-card { border-left: 3px solid var(--indigo-500); padding-left: 1rem; margin-bottom: 1rem; }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }
        @keyframes slideIn { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }
        .animate-slide { animation: slideIn 0.3s ease-out forwards; }
    </style>
</head>
<body class="h-screen flex flex-col">

    <!-- Header -->
    <header class="p-4 border-b border-slate-800 flex justify-between items-center glass-panel">
        <div class="flex items-center gap-2">
            <div class="w-8 h-8 bg-indigo-600 rounded flex items-center justify-center font-bold text-white shadow-lg shadow-indigo-500/20">C</div>
            <div>
                <h1 class="text-sm font-bold tracking-tight">CUSP <span class="text-indigo-400">STRATEGIC</span></h1>
                <p class="text-[10px] text-slate-500 uppercase tracking-widest leading-none">AI Agent v2.4</p>
            </div>
        </div>
        <div id="status-tag" class="text-[10px] px-2 py-1 rounded bg-indigo-500/10 text-indigo-400 border border-indigo-500/20 font-mono">IDLE</div>
    </header>

    <!-- Chat Area -->
    <main id="chat-window" class="flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar">
        <!-- Welcome Message -->
        <div class="max-w-[85%] animate-slide">
            <div class="bg-slate-900 p-4 rounded-2xl rounded-tl-none border border-slate-800 text-sm leading-relaxed">
                Hello! I am your Cusp Intelligent Agent. I specialize in deep-stack software optimization.
                <br><br>
                What business area are we optimizing today? (<b>CRM</b>, <b>Finance</b>, or <b>Projects</b>)
            </div>
        </div>
    </main>

    <!-- Typing Indicator -->
    <div id="typing" class="hidden px-6 py-2 text-[10px] text-slate-500 italic flex items-center gap-2">
        <span class="flex gap-1"><span class="w-1 h-1 bg-indigo-500 rounded-full animate-bounce"></span><span class="w-1 h-1 bg-indigo-500 rounded-full animate-bounce" style="animation-delay:0.2s"></span><span class="w-1 h-1 bg-indigo-500 rounded-full animate-bounce" style="animation-delay:0.4s"></span></span>
        Cusp is generating roadmap and analytics...
    </div>

    <!-- Input Area -->
    <footer class="p-4 glass-panel border-t border-slate-800">
        <form id="chat-form" class="flex gap-2">
            <input type="text" id="user-input" placeholder="e.g. 'Roadmap for 50 people startup under 10k'" 
                   class="flex-1 bg-slate-950 border border-slate-700 rounded-xl px-4 py-3 text-sm focus:outline-none focus:border-indigo-500 transition-all text-white">
            <button type="submit" class="bg-indigo-600 hover:bg-indigo-500 text-white px-5 rounded-xl transition-all flex items-center justify-center">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/></svg>
            </button>
        </form>
    </footer>

<script>
    const chatWindow = document.getElementById('chat-window');
    const chatForm = document.getElementById('chat-form');
    const userInput = document.getElementById('user-input');
    const typing = document.getElementById('typing');
    const statusTag = document.getElementById('status-tag');

    let state = {
        hasRoadmap: false,
        teamSize: 50,
        budget: 10000,
        category: 'CRM'
    };

    // Mock Database for CRM
    const crmData = [
        { name: "Zoho CRM (Free Tier)", annualCost: 0, score: 85, fit: "Ideal for Startups" },
        { name: "Bitrix24 (Basic)", annualCost: 5880, score: 82, fit: "High Value" },
        { name: "Freshsales (Growth)", annualCost: 8900, score: 88, fit: "Great UI" },
        { name: "HubSpot Starter", annualCost: 18500, score: 92, fit: "Over Budget" },
        { name: "Pipedrive", annualCost: 24000, score: 90, fit: "Over Budget" }
    ];

    function addMessage(content, type = 'bot') {
        const wrapper = document.createElement('div');
        wrapper.className = `flex ${type === 'user' ? 'justify-end' : 'justify-start'} animate-slide`;
        
        const bubble = document.createElement('div');
        bubble.className = `${type === 'user' ? 'bg-indigo-600 rounded-tr-none' : 'bg-slate-900 rounded-tl-none border border-slate-800'} p-4 rounded-2xl max-w-[90%] text-sm shadow-xl`;
        bubble.innerHTML = content;
        
        wrapper.appendChild(bubble);
        chatWindow.appendChild(wrapper);
        chatWindow.scrollTop = chatWindow.scrollHeight;
    }

    async function handleResponse(text) {
        statusTag.innerText = "PROCESSING";
        typing.classList.remove('hidden');
        
        // Artificial processing delay
        await new Promise(r => setTimeout(r, 1200));
        typing.classList.add('hidden');

        const input = text.toLowerCase();

        // LOGIC: Check for Roadmap or Analytics request
        if (input.includes('roadmap') || input.includes('immediately') || input.includes('analytics')) {
            
            // 1. Generate Roadmap
            const roadmapHTML = `
                <div class="mb-4">
                    <h3 class="font-bold text-indigo-400 mb-2 uppercase text-xs tracking-widest">Strategic Roadmap: 50-Person CRM Deployment</h3>
                    <div class="roadmap-card">
                        <p class="font-semibold text-white">Week 1: Data Migration & Cleanse</p>
                        <p class="text-xs text-slate-400">Consolidate existing spreadsheets and clean duplicate leads for the startup environment.</p>
                    </div>
                    <div class="roadmap-card">
                        <p class="font-semibold text-white">Week 2: Role-Based Permissions</p>
                        <p class="text-xs text-slate-400">Define access for Sales (30), Marketing (10), and Leadership (10) for your 50-person team.</p>
                    </div>
                    <div class="roadmap-card">
                        <p class="font-semibold text-white">Week 3: Tool Integration</p>
                        <p class="text-xs text-slate-400">Sync with email providers and lead-gen sources.</p>
                    </div>
                </div>
            `;
            addMessage(roadmapHTML);

            // 2. Generate Analytics
            const filteredData = crmData.filter(d => d.annualCost <= 10000);
            const analyticsHTML = `
                <div>
                    <h3 class="font-bold text-indigo-400 mb-2 uppercase text-xs tracking-widest">Annual Cost Analysis (Limit: ₹10k)</h3>
                    <p class="text-xs text-slate-400 mb-4">Note: Finding enterprise-grade CRM for 50 users under ₹10k annually usually requires leveraging free tiers or specific Indian SaaS pricing.</p>
                    <div class="bg-slate-950 p-3 rounded-lg border border-slate-800 mb-4">
                        <canvas id="crmChart" width="400" height="200"></canvas>
                    </div>
                    <ul class="space-y-2">
                        ${filteredData.map(d => `
                            <li class="flex justify-between text-xs border-b border-slate-800 pb-1">
                                <span>${d.name} <span class="text-[10px] text-indigo-500">(${d.fit})</span></span>
                                <span class="font-mono text-emerald-400">₹${d.annualCost.toLocaleString()}</span>
                            </li>
                        `).join('')}
                    </ul>
                </div>
            `;
            addMessage(analyticsHTML);
            
            // Initialize Chart after DOM update
            setTimeout(() => {
                const ctx = document.getElementById('crmChart').getContext('2d');
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: filteredData.map(d => d.name),
                        datasets: [{
                            label: 'Annual Cost (₹)',
                            data: filteredData.map(d => d.annualCost),
                            backgroundColor: '#6366f1',
                            borderColor: '#818cf8',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        indexAxis: 'y',
                        plugins: { legend: { display: false } },
                        scales: {
                            x: { grid: { color: '#1e293b' }, ticks: { color: '#94a3b8', size: 10 } },
                            y: { grid: { display: false }, ticks: { color: '#f8fafc', size: 10 } }
                        }
                    }
                });
            }, 100);

            statusTag.innerText = "COMPLETED";
        } else if (input.includes('50') || input.includes('startup') || input.includes('crm')) {
            addMessage("I've analyzed the needs of a 50-person startup. This scale typically requires a 'Mid-Market' solution rather than a simple 'Agile' one. <br><br>Would you like the <b>Immediate Roadmap</b> or the <b>Budget Analytics (₹10k/yr)</b> first?", 'bot');
            statusTag.innerText = "AWAITING";
        } else {
            addMessage("I'm ready to proceed with your 50-person startup CRM strategy. Please let me know if you want the <b>Roadmap</b> or the <b>Annual Cost Analytics</b> (filtered for under ₹10,000).");
            statusTag.innerText = "AWAITING";
        }
    }

    chatForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const text = userInput.value.trim();
        if (!text) return;
        addMessage(text, 'user');
        userInput.value = '';
        handleResponse(text);
    });

</script>
</body>
</html>